---
title: "Rust边学边吐槽"
date: 2022-03-25T17:30:36+08:00
draft: true
categories: ["tech"]
tags: ["tech", "rust"]
---

去年在不少地方/不少人那里听说 rust 好用，今年来学学

我看的是「The Rust Programming Language」（https://doc.rust-lang.org/book/，中译「Rust 程序设计语言」）

不过很有意思的是，这书我看了前几章都感觉很别扭：按理来说各大语言的教程前几章都是大同小异、可以一扫而过的基础概念，但 rust 从这里就开始特立独行：充斥着反直觉、不统一性与特例，接下来就慢慢列出来，也供我之后的自我 review

题外话：设计者之一是 js 之父，js 这门语言我也觉得很不习惯，ts 就好得多

---

1. bad: let

我知道`let x = 5`这种语法很符合自然语言，同时 js 也是这么用的，但是我仍然不认为 let 是一个好的用于变量声明的关键字，因为无法让变量与函数统一

如果用 let 来声明变量的话，我认为声明函数也应该用个动词，比如 declare/process 之类（这几个是随便写的）

另一方面，目前函数声明是用 fn，这是个名词【注】，所以为什么不用 var 来声明变量呢，保持两者对称，且 js 也有 var 这个关键字

_注：function 也有动词意，但考虑到 function 经常和 method 同台，所以我认为 function 在编程语境中作名词更符合习惯_

2. good: mut

好东西，避免冲突的最好办法就是不动，在主打并发安全的 rust 中这很好用

不变性也暗示了函数式编程的设计倾向？函数人狂喜

3. good: u32

在类型名中体现二进制长度可能会破坏抽象，但确实好用，透明性很高，我很喜欢

对我这种脑容量小到懒得记 long long/dw 在什么架构的机器上是多少位的人来说，这种写法应该推广

4. good: 字面量的数字可以用\_分段

5. bad: utf-8 的字符与 raw byte 的字符串
